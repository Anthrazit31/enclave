<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Phoenix Industries // GenZ Database</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <script>
  (function() {
      'use strict';
      
      // Sayfa yüklenir yüklenmez kontrol et
      // genz.html'deki checkAccess() fonksiyonunu bu şekilde değiştirin:

function checkAccess() {
    // localStorage'da gerekli bilgiler var mı kontrol et
    const userIdentifier = localStorage.getItem('userIdentifier');
    const userPassword = localStorage.getItem('userPassword');
    const userType = localStorage.getItem('userType');
    const validEntry = localStorage.getItem('genz_access'); // Yeni kontrol parametresi
    
    // Eğer localStorage'da bilgiler yoksa veya boşsa (yani index.html'den giriş yapmamış)
    if (!userIdentifier || !userPassword || !userType) {
        alert('⚠️ Yetkisiz erişim! Lütfen giriş yapın.');
        window.location.replace('index.html');
        return;
    }
    
    // Raiden3'e sadece terminal.html'den erişim kontrolü
    if (!validEntry || validEntry !== 'terminal_authorized') {
        alert('⚠️ Bu sayfaya direkt erişim yasaktır! Terminal üzerinden erişim sağlayın.');
        // localStorage'ı temizle ve index.html'e yönlendir
        localStorage.clear();
        window.location.replace('index.html');
        return;
    }
    
    // Session timeout kontrolü (30 dakika)
    const loginTime = localStorage.getItem('loginTime');
    if (loginTime) {
        const currentTime = new Date().getTime();
        const sessionDuration = 30 * 60 * 1000; // 30 dakika
        
        if (currentTime - parseInt(loginTime) > sessionDuration) {
            alert('⏰ Oturum süreniz doldu. Lütfen tekrar giriş yapın.');
            localStorage.clear();
            window.location.replace('index.html');
            return;
        }
    }
    
    // Erişim anahtarını temizle (tek seferlik kullanım)
    localStorage.removeItem('genz_access');
    
    // Eğer her şey tamam ise, login zamanını güncelle
    localStorage.setItem('loginTime', new Date().getTime().toString());
}
      
      // Sayfa yüklendiğinde kontrol et
      if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', checkAccess);
      } else {
          checkAccess();
      }
      
  })();
  </script>
  
  <style>
    :root {
      --primary: #00ff00;
      --secondary: #003300;
      --accent: #00cc00;
      --error: #ff3333;
      --warning: #ffaa00;
      --bg: #000;
      --text: #00ff00;
      --transition: all 0.3s ease;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Share Tech Mono', monospace;
      background: var(--bg);
      color: var(--text);
      height: 100vh;
      overflow: hidden;
      position: relative;
    }
    
    /* CRT Effect */
    .crt-effect::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        linear-gradient(rgba(255, 51, 51, 0.05) 50%, rgba(0, 0, 0, 0.1) 50%),
        linear-gradient(90deg, rgba(255, 51, 51, 0.05), rgba(255, 51, 51, 0.02), rgba(255, 51, 51, 0.05));
      background-size: 100% 3px, 3px 100%;
      pointer-events: none;
      z-index: 100;
    }
    
    .crt-effect::after {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 0, 0, 0.1);
      opacity: 0.1;
      pointer-events: none;
      z-index: 100;
      animation: errorFlicker 0.1s infinite;
    }
    
    @keyframes errorFlicker {
      0%, 100% { opacity: 0.1; }
      25% { opacity: 0.2; }
      50% { opacity: 0.05; }
      75% { opacity: 0.15; }
    }
    
    /* Entry Animation */
    .entry-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg);
      color: var(--primary);
      font-size: clamp(1.5rem, 5vw, 3rem);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      opacity: 1;
      transition: opacity 2s ease;
    }
    
    .entry-animation.fade-out {
      opacity: 0;
      visibility: hidden;
    }
    
    /* Typing Effect for Entry */
    .typing-text {
      display: inline-block;
    }
    
    .typing-cursor {
      display: inline-block;
      background-color: var(--primary);
      width: 2px;
      height: 1em;
      animation: blink 1s infinite;
      margin-left: 1px;
    }
    
    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }
    
    /* Emergency Screen */
    .emergency-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg);
      color: var(--error);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      text-align: center;
      padding: 20px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 1s ease;
    }
    
    .emergency-screen.active {
      opacity: 1;
      visibility: visible;
    }
    
    .emergency-title {
      font-size: clamp(2rem, 6vw, 4rem);
      font-weight: bold;
      margin-bottom: 30px;
      animation: criticalFlash 0.5s infinite alternate;
      text-shadow: 0 0 20px var(--error);
    }
    
    @keyframes criticalFlash {
      0% { color: var(--error); }
      100% { color: var(--warning); }
    }
    
    .emergency-messages {
      font-size: clamp(1rem, 3vw, 1.5rem);
      margin-bottom: 40px;
      max-width: 800px;
    }
    
    .emergency-message {
      margin: 15px 0;
      opacity: 0;
      animation: fadeInMessage 1s ease forwards;
    }
    
    .emergency-message:nth-child(1) { animation-delay: 0.5s; }
    .emergency-message:nth-child(2) { animation-delay: 1.5s; }
    .emergency-message:nth-child(3) { animation-delay: 2.5s; }
    .emergency-message:nth-child(4) { animation-delay: 3.5s; }
    
    @keyframes fadeInMessage {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    
    .countdown-container {
      margin-top: 50px;
      opacity: 0;
      animation: fadeInMessage 1s ease forwards 4.5s;
    }
    
    .countdown-label {
      font-size: clamp(1.2rem, 4vw, 2rem);
      color: var(--warning);
      margin-bottom: 20px;
    }
    
    .countdown-display {
      font-size: clamp(3rem, 8vw, 6rem);
      color: var(--error);
      font-weight: bold;
      animation: countdownPulse 1s infinite;
      text-shadow: 0 0 30px var(--error);
    }
    
    @keyframes countdownPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    /* Warning Bars */
    .warning-bar {
      position: absolute;
      width: 100%;
      height: 10px;
      background: linear-gradient(90deg, 
        transparent, 
        var(--error) 25%, 
        var(--warning) 50%, 
        var(--error) 75%, 
        transparent
      );
      animation: slideWarning 2s infinite linear;
    }
    
    .warning-bar.top {
      top: 0;
    }
    
    .warning-bar.bottom {
      bottom: 0;
      animation-direction: reverse;
    }
    
    @keyframes slideWarning {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    
    /* Glitch Effect for Emergency */
    .emergency-glitch {
      position: relative;
    }
    
    .emergency-glitch::before,
    .emergency-glitch::after {
      content: attr(data-text);
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: var(--bg);
    }
    
    .emergency-glitch::before {
      animation: glitch1 0.5s infinite;
      color: var(--error);
      z-index: -1;
    }
    
    .emergency-glitch::after {
      animation: glitch2 0.5s infinite;
      color: var(--warning);
      z-index: -2;
    }
    
    @keyframes glitch1 {
      0% { transform: translate(0); }
      20% { transform: translate(-2px, 2px); }
      40% { transform: translate(-2px, -2px); }
      60% { transform: translate(2px, 2px); }
      80% { transform: translate(2px, -2px); }
      100% { transform: translate(0); }
    }
    
    @keyframes glitch2 {
      0% { transform: translate(0); }
      20% { transform: translate(2px, 2px); }
      40% { transform: translate(2px, -2px); }
      60% { transform: translate(-2px, 2px); }
      80% { transform: translate(-2px, -2px); }
      100% { transform: translate(0); }
    }
    
    /* Shutdown Effect */
    .shutdown-effect {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg);
      z-index: 10000;
      opacity: 0;
      pointer-events: none;
    }
    
    .shutdown-effect.active {
      opacity: 1;
      pointer-events: all;
      animation: shutdownSequence 3s ease forwards;
    }
    
    @keyframes shutdownSequence {
      0% { 
        opacity: 0;
        transform: scaleY(1);
      }
      30% { 
        opacity: 0.8;
        transform: scaleY(1);
      }
      70% { 
        opacity: 0.9;
        transform: scaleY(0.1);
      }
      100% { 
        opacity: 1;
        transform: scaleY(0);
      }
    }
    
    /* Hidden Terminal (original content) */
    .terminal-container {
      display: none;
      padding: 20px;
      height: 100vh;
      overflow-y: auto;
      z-index: 2;
      position: relative;
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .emergency-messages {
        font-size: 1rem;
        padding: 0 15px;
      }
      
      .emergency-title {
        font-size: 2.5rem;
      }
      
      .countdown-display {
        font-size: 4rem;
      }
    }
    
    @media (max-width: 480px) {
      .emergency-title {
        font-size: 2rem;
        margin-bottom: 20px;
      }
      
      .emergency-messages {
        font-size: 0.9rem;
      }
      
      .countdown-display {
        font-size: 3rem;
      }
    }
    
    /* Accessibility */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
  </style>
</head>
<body class="crt-effect">
  
  <!-- Emergency Audio -->
  <audio id="errorSound" preload="auto">
    <source src="sounds/error.mp3" type="audio/mpeg">
  </audio>
  
  <audio id="shutdownSound" preload="auto">
    <source src="sounds/shutdown.mp3" type="audio/mpeg">
  </audio>
  
  <!-- Entry Animation -->
  <div class="entry-animation" id="entryAnimation">
    <span id="entryText"></span>
    <span class="typing-cursor" id="entryCursor"></span>
  </div>
  
  <!-- Warning Bars -->
  <div class="warning-bar top"></div>
  <div class="warning-bar bottom"></div>
  
  <!-- Emergency Screen -->
  <div class="emergency-screen" id="emergencyScreen">
    <div class="emergency-title emergency-glitch" data-text="CRITICAL SYSTEM FAILURE">
      CRITICAL SYSTEM FAILURE
    </div>
    
    <div class="emergency-messages">
      <div class="emergency-message">⚠️ SYSTEM FILES CORRUPTED</div>
      <div class="emergency-message">⚠️ EMERGENCY SYSTEMS ARE ONLINE</div>
      <div class="emergency-message">⚠️ INITIATING EMERGENCY SHUTDOWN PROTOCOL</div>
      <div class="emergency-message">⚠️ ALL DATA COMPROMISED - IMMEDIATE EVACUATION REQUIRED</div>
    </div>
    
    <div class="countdown-container">
      <div class="countdown-label">EMERGENCY SHUTDOWN IN:</div>
      <div class="countdown-display" id="countdownDisplay">20</div>
    </div>
  </div>
  
  <!-- Shutdown Effect -->
  <div class="shutdown-effect" id="shutdownEffect"></div>

  <!-- Hidden Terminal Content (original) -->
  <div class="terminal-container">
    <div id="output"></div>
    <div class="command-line">
      <span class="prompt">></span>
      <input type="text" class="input-line" id="commandInput" autofocus autocomplete="off" spellcheck="false">
    </div>
  </div>

  <script>
    class SoundGenerator {
      constructor() {
        this.audioContext = null;
        this.initAudioContext();
      }
      
      initAudioContext() {
        try {
          this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
        } catch (e) {
          console.warn('Audio context not supported');
        }
      }
      
      playOutputSound() {
        if (!this.audioContext) return;
        
        const oscillator = this.audioContext.createOscillator();
        const gainNode = this.audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(this.audioContext.destination);
        
        // Output sound parameters for typing
        oscillator.frequency.setValueAtTime(1000, this.audioContext.currentTime);
        oscillator.frequency.exponentialRampToValueAtTime(600, this.audioContext.currentTime + 0.02);
        
        gainNode.gain.setValueAtTime(0.02, this.audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.001, this.audioContext.currentTime + 0.02);
        
        oscillator.type = 'sine';
        oscillator.start(this.audioContext.currentTime);
        oscillator.stop(this.audioContext.currentTime + 0.02);
      }
    }

    class EmergencySystem {
      constructor() {
        this.errorSound = document.getElementById('errorSound');
        this.shutdownSound = document.getElementById('shutdownSound');
        this.entryAnimation = document.getElementById('entryAnimation');
        this.entryText = document.getElementById('entryText');
        this.entryCursor = document.getElementById('entryCursor');
        this.emergencyScreen = document.getElementById('emergencyScreen');
        this.countdownDisplay = document.getElementById('countdownDisplay');
        this.shutdownEffect = document.getElementById('shutdownEffect');
        this.soundGenerator = new SoundGenerator();
        
        this.countdown = 20;
        this.countdownInterval = null;
        this.audioFadeInterval = null;
        
        this.init();
      }
      
      init() {
        this.setupAudioContext();
        this.startEntrySequence();
      }
      
      setupAudioContext() {
        // Setup audio context for typing sounds
        const enableAudio = () => {
          if (this.soundGenerator.audioContext && this.soundGenerator.audioContext.state === 'suspended') {
            this.soundGenerator.audioContext.resume();
          }
          document.removeEventListener('click', enableAudio);
          document.removeEventListener('keydown', enableAudio);
        };
        
        document.addEventListener('click', enableAudio);
        document.addEventListener('keydown', enableAudio);
      }
      
      startEntrySequence() {
        const text = "ACCESSING PHOENIX INDUSTRIES // GenZ DATABASE...";
        
        let i = 0;
        const typeEntry = () => {
          if (i < text.length) {
            this.entryText.textContent += text[i];
            i++;
            setTimeout(typeEntry, 80); // Same typing speed as others
          } else {
            setTimeout(() => {
              this.entryAnimation.classList.add('fade-out');
              setTimeout(() => {
                this.entryAnimation.style.display = 'none';
                this.emergencyScreen.classList.add('active');
                this.startEmergencySequence();
              }, 2000);
            }, 1000);
          }
        };
        
        setTimeout(typeEntry, 500); // Start typing after brief delay
      }
      
      startEmergencySequence() {
        // Start error sound and countdown after emergency screen shows
        setTimeout(() => {
          this.playErrorSound();
          this.startCountdown();
        }, 1000);
      }
      
      playErrorSound() {
        this.errorSound.volume = 0.3;
        this.shutdownSound.volume = 0.3;
        
        this.errorSound.play().catch(error => {
          console.warn('Error sound could not be played:', error);
          // Try to play on first user interaction
          const playOnInteraction = () => {
            this.errorSound.play().catch(console.warn);
            document.removeEventListener('click', playOnInteraction);
            document.removeEventListener('keydown', playOnInteraction);
          };
          document.addEventListener('click', playOnInteraction);
          document.addEventListener('keydown', playOnInteraction);
        });
        
        // Start shutdown sound after 6 seconds
        setTimeout(() => {
          this.shutdownSound.play().catch(console.warn);
        }, 6000);
        
        // Start fade out effect after 10 seconds
        setTimeout(() => {
          this.fadeOutErrorSound();
        }, 10000);
      }
      
      fadeOutErrorSound() {
        let volume = this.errorSound.volume;
        const fadeStep = volume / 20; // Fade out in 1 second (50ms * 20 steps)
        
        this.audioFadeInterval = setInterval(() => {
          volume -= fadeStep;
          if (volume <= 0) {
            volume = 0;
            this.errorSound.pause();
            clearInterval(this.audioFadeInterval);
          }
          this.errorSound.volume = volume;
        }, 50);
      }
      
      startCountdown() {
        this.countdownInterval = setInterval(() => {
          this.countdown--;
          this.countdownDisplay.textContent = this.countdown.toString().padStart(2, '0');
          
          // Play beep sound for last 5 seconds
          if (this.countdown <= 5 && this.countdown > 0) {
            this.playBeep();
          }
          
          // Shutdown when countdown reaches 0
          if (this.countdown <= 0) {
            clearInterval(this.countdownInterval);
            this.initiateShutdown();
          }
        }, 1000);
      }
      
      playBeep() {
        // Create a short beep using Web Audio API
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
          gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
          
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.1);
        } catch (error) {
          console.warn('Could not create beep sound:', error);
        }
      }
      
      initiateShutdown() {
        // Stop error sound and clear any fade interval
        this.errorSound.pause();
        if (this.audioFadeInterval) {
          clearInterval(this.audioFadeInterval);
        }
        
        // Start shutdown effect
        this.shutdownEffect.classList.add('active');
        
        // Redirect after shutdown animation
        setTimeout(() => {
          window.location.href = 'terminal.html';
        }, 3000);
      }
    }
    
    // Prevent any user interaction that might interfere
    document.addEventListener('keydown', (e) => {
      e.preventDefault();
    });
    
    document.addEventListener('contextmenu', (e) => {
      e.preventDefault();
    });
    
    // Initialize emergency system when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      new EmergencySystem();
    });
  </script>
</body>
</html>